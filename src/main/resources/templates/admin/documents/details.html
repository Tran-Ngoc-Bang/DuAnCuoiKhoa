<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi ti·∫øt t√†i li·ªáu - EduShare Admin</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&family=Open+Sans:wght@400;500;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/admin/admin.css}">
    <link rel="stylesheet" th:href="@{/css/admin/toast.css}">
    <link rel="stylesheet" th:href="@{/css/admin/admin_documents.css}">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
    <style>
        /* üåü Modal Wrapper */
.modal-content.large {
  margin-left: 200px;
}

@keyframes modalFadeIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

/* Header */
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 16px;
  border-bottom: 1px solid #eee;
}
.modal-header h3 {
  font-size: 1.75rem;
  font-weight: 700;
  color: #222;
  margin: 0;
}
.modal-close {
  background: transparent;
  border: none;
  font-size: 1.5rem;
  color: #999;
  cursor: pointer;
  transition: color 0.2s;
}
.modal-close:hover { color: #333; }

/* Footer */
.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding-top: 16px;
  border-top: 1px solid #eee;
}

/* Tabs */
.modal-tabs .tab-nav {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}
.tab-btn {
  padding: 10px 16px;
  border: 1px solid #ddd;
  border-radius: 6px;
  background: #f9f9f9;
  font-weight: 600;
  color: #555;
  transition: background 0.2s, color 0.2s, border-color 0.2s;
}
.tab-btn.active {
  background: #4f46e5;
  color: #fff;
  border-color: #4f46e5;
}
.tab-btn:hover { background: #eee; }

/* Form */
.form-row {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  margin-bottom: 12px;
}
.form-group {
  flex: 1 1 48%;
  display: flex;
  flex-direction: column;
}
.form-group label {
  font-weight: 600;
  margin-bottom: 6px;
  color: #333;
}
input, select, textarea {
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 1rem;
  transition: border-color 0.2s;
}
input:focus, select:focus, textarea:focus {
  border-color: #4f46e5;
  outline: none;
}

/* Upload */
.file-upload {
  border: 2px dashed #ccc;
  padding: 20px;
  text-align: center;
  border-radius: 6px;
  transition: border-color 0.2s;
}
.file-upload:hover { border-color: #4f46e5; }

.file-upload-label i { font-size: 2rem; color: #aaa; }
.file-upload-label span { display: block; font-weight: 500; margin-top: 8px; }

.thumbnail-preview img {
  max-width: 100%;
  border-radius: 6px;
  margin-top: 10px;
}

.btn-remove {
  background: none;
  border: none;
  color: #dc2626;
  cursor: pointer;
}
.btn-remove:hover { color: #991b1b; }

/* Helper text */
.form-help {
  font-size: 0.85rem;
  color: #666;
}

.required { color: #dc2626; }
    </style>
</head>
<body class="admin-page">
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="admin-header-content">
            <div class="admin-logo">
                <a href="/admin" class="logo">
                    <div class="logo-icon">E</div>
                    <div class="logo-text">EduShare</div>
                </a>
            </div>
            <div class="admin-header-actions">
                <div class="admin-search">
                    <input type="text" placeholder="T√¨m ki·∫øm...">
                    <button><i class="fas fa-search"></i></button>
                </div>
                <div class="dark-mode-toggle" id="darkModeToggle"></div>
                <div class="admin-notifications">
                    <button type="button" class="notification-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">5</span>
                    </button>
                </div>
                <div class="admin-profile">
                    <div class="admin-avatar">
                        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Admin">
                    </div>
                    <div class="admin-info">
                        <span class="admin-name">Nguy·ªÖn VƒÉn A</span>
                        <span>Qu·∫£n tr·ªã vi√™n</span>
                    </div>
                    <div class="admin-dropdown">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Admin Container -->
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <nav class="admin-nav">
                <ul class="admin-menu">
                    <li class="admin-menu-item">
                        <a href="/admin"><i class="fas fa-tachometer-alt"></i><span>B·∫£ng ƒëi·ªÅu khi·ªÉn</span></a>
                    </li>
                    <li class="admin-menu-item">
                        <a href="/admin/users"><i class="fas fa-users"></i><span>Qu·∫£n l√Ω ng∆∞·ªùi d√πng</span></a>
                    </li>
                    <li class="admin-menu-item active">
                        <a href="/admin/documents"><i class="fas fa-file-alt"></i><span>Qu·∫£n l√Ω t√†i li·ªáu</span></a>
                    </li>
                    <li class="admin-menu-item">
                        <a href="/admin/categories"><i class="fas fa-folder"></i><span>Qu·∫£n l√Ω danh m·ª•c</span></a>
                    </li>
                    <li class="admin-menu-item">
                        <a href="/admin/tags"><i class="fas fa-tags"></i><span>Qu·∫£n l√Ω tags</span></a>
                    </li>
                    <li class="admin-menu-item">
                        <a href="/admin/comments"><i class="fas fa-comments"></i><span>Qu·∫£n l√Ω b√¨nh lu·∫≠n</span></a>
                    </li>
                    <li class="admin-menu-item">
                        <a href="/admin/reports"><i class="fas fa-flag"></i><span>B√°o c√°o vi ph·∫°m</span></a>
                    </li>
                    <li class="admin-menu-item">
                        <a href="/admin/ip-bans"><i class="fas fa-ban"></i><span>IP b·ªã c·∫•m</span></a>
                    </li>
                    <li class="admin-menu-item">
                        <a href="/admin/statistics"><i class="fas fa-chart-bar"></i><span>Th·ªëng k√™</span></a>
                    </li>
                    <li class="admin-menu-item has-submenu">
                        <a href="javascript:void(0)">
                            <i class="fas fa-coins"></i><span>Qu·∫£n l√Ω doanh thu</span>
                            <i class="fas fa-chevron-down submenu-icon"></i>
                        </a>
                        <ul class="submenu">
                            <li class="submenu-item"><a href="/admin/coin-packages"><i class="fas fa-box"></i><span>G√≥i xu</span></a></li>
                            <li class="submenu-item"><a href="/admin/transactions"><i class="fas fa-exchange-alt"></i><span>Giao d·ªãch</span></a></li>
                            <li class="submenu-item"><a href="/admin/withdrawals"><i class="fas fa-money-bill-wave"></i><span>Y√™u c·∫ßu r√∫t ti·ªÅn</span></a></li>
                        </ul>
                    </li>
                    <li class="admin-menu-item">
                        <a href="/admin/settings"><i class="fas fa-cog"></i><span>C√†i ƒë·∫∑t</span></a>
                    </li>
                    <li class="admin-menu-item">
                        <a href="/logout"><i class="fas fa-sign-out-alt"></i><span>ƒêƒÉng xu·∫•t</span></a>
                    </li>
                </ul>
            </nav>
        </aside>
        <!-- Main Content -->
        <main class="admin-content">
            <div class="admin-content-header">
                <h1 class="admin-page-title">Chi ti·∫øt t√†i li·ªáu</h1>
                <div class="admin-breadcrumbs">
                    <a href="/admin/documents">Admin</a>
                    <span>/</span>
                    <a href="/admin/documents">T√†i li·ªáu</a>
                    <span>/</span>
                    <span>Chi ti·∫øt</span>
                </div>
            </div>
            <div th:if="${success}" class="alert alert-success" role="alert">
                <i class="fas fa-check-circle"></i> <span th:text="${success}"></span>
            </div>
            <div th:if="${error}" class="alert alert-danger" role="alert">
                <i class="fas fa-exclamation-circle"></i> <span th:text="${error}"></span>
            </div>
            <div class="modal-content large">
                <div class="modal-header">
                    <h3 th:text="${document.title} ?: 'Chi ti·∫øt t√†i li·ªáu'"></h3>
                    <a th:href="@{/admin/documents}" class="modal-close">
                        <i class="fas fa-times"></i>
                    </a>
                </div>
                <div class="modal-body">
                    <!-- Tab Navigation -->
                    <div class="modal-tabs">
                        <div class="tab-nav">
                            <button type="button" class="tab-btn active" data-tab="general">
                                <i class="fas fa-info-circle"></i><span>Th√¥ng tin chung</span>
                            </button>
                            <button type="button" class="tab-btn" data-tab="versions">
                                <i class="fas fa-history"></i><span>L·ªãch s·ª≠ phi√™n b·∫£n</span>
                            </button>
                            <button type="button" class="tab-btn" data-tab="analytics">
                                <i class="fas fa-chart-bar"></i><span>Th·ªëng k√™ & Ph√¢n t√≠ch</span>
                            </button>
                            <button type="button" class="tab-btn" data-tab="reviews">
                                <i class="fas fa-comments"></i><span>B√¨nh lu·∫≠n</span>
                            </button>
                        </div>
                    </div>
                    <!-- Tab Content Panels -->
                    <div class="tab-content">
                        <!-- Tab 1: General Information -->
                        <div class="tab-panel active" id="tab-general">
                            <div class="row" id="documentDetailsContent">
                                <div class="col-md-4">
                                    <img th:src="${document.thumbnail != null ? document.thumbnail : 'https://via.placeholder.com/400x300'}" class="img-fluid rounded" alt="Thumbnail">
                                </div>
                                <div class="col-md-8">
                                    <h4 th:text="${document.title} ?: 'Kh√¥ng c√≥ ti√™u ƒë·ªÅ'"></h4>
                                    <p class="text-muted" th:text="${document.description != null and !document.description.trim().isEmpty()} ? ${document.description} : 'Kh√¥ng c√≥ m√¥ t·∫£'"></p>
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <strong>T√°c gi·∫£:</strong> <span th:text="${document.authorName != null ? document.authorName : 'Kh√¥ng x√°c ƒë·ªãnh'}"></span><br>
                                            <strong>Danh m·ª•c:</strong> <span th:text="${document.categoryNames != null and !document.categoryNames.isEmpty()} ? ${#strings.listJoin(document.categoryNames, ', ')} : 'Kh√¥ng c√≥ danh m·ª•c'"></span><br>
                                            <strong>Lo·∫°i file:</strong> <span th:text="${document.fileType != null ? document.fileType : 'Kh√¥ng x√°c ƒë·ªãnh'}"></span><br>
                                            <strong>Gi√°:</strong> <span th:text="${document.price != null and document.price.compareTo(T(java.math.BigDecimal).ZERO) > 0} ? (${#numbers.formatDecimal(document.price, 0, 0)} + ' coin') : 'Mi·ªÖn ph√≠'"></span>
                                        </div>
                                        <div class="col-sm-6">
                                            <strong>L∆∞·ª£t xem:</strong> <span th:text="${document.viewsCount != null ? document.viewsCount : '0'}"></span><br>
                                            <strong>L∆∞·ª£t t·∫£i:</strong> <span th:text="${document.downloadsCount != null ? document.downloadsCount : '0'}"></span><br>
                                            <strong>ƒê√°nh gi√°:</strong> <span>Ch∆∞a c√≥ ƒë√°nh gi√°</span><br>
                                            <strong>K√≠ch th∆∞·ªõc:</strong> <span th:text="${document.fileSize != null ? (#numbers.formatDecimal(document.fileSize, 1, 2) + ' MB') : '0.00 MB'}"></span>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <strong>Tags:</strong><br>
                                        <div th:text="${document.tagNames != null and !document.tagNames.isEmpty()} ? ${#strings.listJoin(document.tagNames, ', ')} : 'Kh√¥ng c√≥ tag'"></div>
                                    </div>
                                    <div class="mb-3">
                                        <strong>Tr·∫°ng th√°i:</strong>
                                        <span th:class="|status-badge ${document.status != null ? document.status : 'DRAFT'}|" th:text="${document.status != null ? document.status : 'DRAFT'}"></span>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <strong>Ng√†y t·∫°o:</strong> <span th:text="${document.createdAt != null} ? ${#temporals.format(document.createdAt, 'dd/MM/yyyy HH:mm')} : 'Ch∆∞a x√°c ƒë·ªãnh'"></span>
                                        </div>
                                        <div class="col-sm-6">
                                            <strong>Ng√†y c·∫≠p nh·∫≠t:</strong> <span th:text="${document.updatedAt != null} ? ${#temporals.format(document.updatedAt, 'dd/MM/yyyy HH:mm')} : 'Ch∆∞a x√°c ƒë·ªãnh'"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Tab 2: Version History -->
                        <div class="tab-panel" id="tab-versions">
                            <div class="versions-container">
                                <div class="versions-header">
                                    <h5>L·ªãch s·ª≠ phi√™n b·∫£n</h5>
                                    <button type="button" class="btn btn-sm btn-outline">
                                        <i class="fas fa-plus"></i><span>T·∫°o phi√™n b·∫£n m·ªõi</span>
                                    </button>
                                </div>
                                <div class="versions-timeline" id="versionsTimeline">
                                    <!-- Sample version item, replace with actual data -->
                                   <!--  <div class="version-item" th:each="version : ${document.versions}">
                                        <div class="version-badge" th:text="${version.versionNumber} ?: 'v1.0'"></div>
                                        <div class="version-content">
                                            <div class="version-header">
                                                <strong th:text="${version.title} ?: 'Phi√™n b·∫£n ban ƒë·∫ßu'"></strong>
                                                <span class="version-date" th:text="${version.createdAt != null} ? ${#temporals.format(version.createdAt, 'dd/MM/yyyy HH:mm')} : '23/06/2025, 10:30'"></span>
                                            </div>
                                            <p class="version-note" th:text="${version.note} ?: 'T√†i li·ªáu ƒë∆∞·ª£c t·∫°o l·∫ßn ƒë·∫ßu'"></p>
                                            <div class="version-actions">
                                                <button type="button" class="btn btn-sm btn-outline">
                                                    <i class="fas fa-download"></i> T·∫£i xu·ªëng
                                                </button>
                                                <button type="button" class="btn btn-sm btn-outline">
                                                    <i class="fas fa-eye"></i> Xem
                                                </button>
                                            </div>
                                        </div>
                                    </div>--> 
                                   <!--   <div class="version-item" th:unless="${document.versions}">
                                        <div class="version-badge">v1.0</div>
                                        <div class="version-content">
                                            <div class="version-header">
                                                <strong>Phi√™n b·∫£n ban ƒë·∫ßu</strong>
                                                <span class="version-date">23/06/2025, 10:30</span>
                                            </div>
                                            <p class="version-note">T√†i li·ªáu ƒë∆∞·ª£c t·∫°o l·∫ßn ƒë·∫ßu</p>
                                            <div class="version-actions">
                                                <button type="button" class="btn btn-sm btn-outline">
                                                    <i class="fas fa-download"></i> T·∫£i xu·ªëng
                                                </button>
                                                <button type="button" class="btn btn-sm btn-outline">
                                                    <i class="fas fa-eye"></i> Xem
                                                </button>
                                            </div>
                                        </div>
                                    </div>--> 
                                </div>
                            </div>
                        </div>
                        <!-- Tab 3: Analytics & Statistics -->
                        <div class="tab-panel" id="tab-analytics">
                            <div class="analytics-container">
                                <div class="analytics-header">
                                    <h5>Th·ªëng k√™ & Ph√¢n t√≠ch</h5>
                                    <div class="date-range-selector">
                                        <select class="form-select form-select-sm" id="dateRangeSelector">
                                            <option value="7d">7 ng√†y qua</option>
                                            <option value="30d">30 ng√†y qua</option>
                                            <option value="90d">3 th√°ng qua</option>
                                            <option value="1y">1 nƒÉm qua</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row mb-4">
                                    <div class="col-md-3">
                                        <div class="stats-card">
                                            <div class="stats-icon"><i class="fas fa-eye"></i></div>
                                            <div class="stats-content">
                                                <h6>L∆∞·ª£t xem</h6>
                                                <div class="stats-number" th:text="${document.viewsCount != null ? document.viewsCount : '0'}"></div>
                                                <div class="stats-change positive">+12% t·ª´ tu·∫ßn tr∆∞·ªõc</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="stats-card">
                                            <div class="stats-icon"><i class="fas fa-download"></i></div>
                                            <div class="stats-content">
                                                <h6>L∆∞·ª£t t·∫£i</h6>
                                                <div class="stats-number" th:text="${document.downloadsCount != null ? document.downloadsCount : '0'}"></div>
                                                <div class="stats-change positive">+8% t·ª´ tu·∫ßn tr∆∞·ªõc</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="stats-card">
                                            <div class="stats-icon"><i class="fas fa-share"></i></div>
                                            <div class="stats-content">
                                                <h6>L∆∞·ª£t chia s·∫ª</h6>
                                           <!--     <div class="stats-number" th:text="${document.sharesCount != null ? document.sharesCount : '0'}"></div> --> 
                                                <div class="stats-change negative">-3% t·ª´ tu·∫ßn tr∆∞·ªõc</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="stats-card">
                                            <div class="stats-icon"><i class="fas fa-star"></i></div>
                                            <div class="stats-content">
                                                <h6>ƒê√°nh gi√° TB</h6>
                                                <div class="stats-number">0.0</div>
                                                <div class="stats-change positive">+0.1 t·ª´ tu·∫ßn tr∆∞·ªõc</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="chart-container">
                                    <canvas id="analyticsChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <!-- Tab 4: Reviews & Comments -->
                    <div class="tab-panel" id="tab-reviews">
    <div class="reviews-container">
        <div class="reviews-header">
            <h5>B√¨nh lu·∫≠n</h5>
        </div>
        <div class="reviews-list" id="reviewsList">
            <div class="review-item" th:each="comment : ${document.comments}">
                <div class="review-header">
                    <div class="reviewer-info">
                        <img th:src="${comment.userAvatar != null ? comment.userAvatar : 'https://via.placeholder.com/40'}" class="avatar" alt="avatar">
                        <div class="reviewer-details">
                            <strong class="reviewer-name" th:text="${comment.userName} ?: 'Kh√¥ng x√°c ƒë·ªãnh'"></strong>
                            <div class="metadata">
                                <span class="timestamp" th:text="${comment.createdAt != null} ? ${#temporals.format(comment.createdAt, 'dd/MM/yyyy HH:mm')} : '2 ng√†y tr∆∞·ªõc'"></span>
                            </div>
                        </div>
                    </div>
                    <div class="review-actions">
                        <button type="button" class="btn btn-sm btn-outline">
                            <i class="fas fa-reply"></i> Tr·∫£ l·ªùi
                        </button>
                        <button type="button" class="btn btn-sm btn-outline text-danger">
                            <i class="fas fa-flag"></i> B√°o c√°o
                        </button>
                    </div>
                </div>
                <div class="review-content">
                    <p th:text="${comment.content} ?: 'T√†i li·ªáu r·∫•t h·ªØu √≠ch v√† chi ti·∫øt. C·∫£m ∆°n t√°c gi·∫£!'"></p>
                </div>
            </div>
            <div class="review-item" th:unless="${document.comments}">
                <div class="review-header">
                    <div class="reviewer-info">
                        <img src="https://via.placeholder.com/40" class="avatar" alt="avatar">
                        <div class="reviewer-details">
                            <strong class="reviewer-name">Nguy·ªÖn VƒÉn A</strong>
                            <div class="metadata">
                                <span class="timestamp">2 ng√†y tr∆∞·ªõc</span>
                            </div>
                        </div>
                    </div>
                    <div class="review-actions">
                        <button type="button" class="btn btn-sm btn-outline">
                            <i class="fas fa-reply"></i> Tr·∫£ l·ªùi
                        </button>
                        <button type="button" class="btn btn-sm btn-outline text-danger">
                            <i class="fas fa-flag"></i> B√°o c√°o
                        </button>
                    </div>
                </div>
                <div class="review-content">
                    <p>T√†i li·ªáu r·∫•t h·ªØu √≠ch v√† chi ti·∫øt. C·∫£m ∆°n t√°c gi·∫£!</p>
                </div>
            </div>
        </div>
        <div class="reviews-actions">
        <!--     <button type="button" class="btn btn-outline">Xem th√™m b√¨nh lu·∫≠n</button> -->
        </div>
    </div>
</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a th:href="@{/admin/documents}" class="btn btn-outline">ƒê√≥ng</a>
                    <a th:href="@{/admin/documents/{id}/edit(id=${document.id})}" class="btn btn-primary">
                        <i class="fas fa-edit"></i><span>Ch·ªânh s·ª≠a</span>
                    </a>
                </div>
            </div>
        </main>
    </div>
    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Tab switching
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabPanels = document.querySelectorAll('.tab-panel');
            tabButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const target = this.dataset.tab;
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabPanels.forEach(panel => panel.classList.remove('active'));
                    this.classList.add('active');
                    document.getElementById(`tab-${target}`).classList.add('active');
                });
            });
            // Hover effects for buttons
            const buttons = document.querySelectorAll('.btn.btn-outline, .btn.btn-primary');
            if (buttons.length > 0) {
                buttons.forEach(button => {
                    button.addEventListener('mouseenter', function() {
                        this.style.transform = 'translateY(-3px)';
                        if (this.classList.contains('btn-primary')) {
                            this.style.boxShadow = '0 5px 15px rgba(79, 70, 229, 0.3)';
                        } else {
                            this.style.backgroundColor = 'rgba(79, 70, 229, 0.1)';
                        }
                    });
                    button.addEventListener('mouseleave', function() {
                        this.style.transform = '';
                        this.style.boxShadow = '';
                        this.style.backgroundColor = '';
                    });
                });
            }
            // Analytics chart
            const ctx = document.getElementById('analyticsChart');
            if (ctx) {
                const chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Ng√†y 1', 'Ng√†y 2', 'Ng√†y 3', 'Ng√†y 4', 'Ng√†y 5', 'Ng√†y 6', 'Ng√†y 7'],
                        datasets: [
                            {
                                label: 'L∆∞·ª£t xem',
                                data: [100, 120, 150, 130, 170, 160, 180], // Thay b·∫±ng d·ªØ li·ªáu ƒë·ªông n·∫øu c√≥
                                borderColor: '#4f46e5',
                                backgroundColor: 'rgba(79, 70, 229, 0.2)',
                                fill: true
                            },
                            {
                                label: 'L∆∞·ª£t t·∫£i',
                                data: [20, 30, 25, 40, 35, 50, 45], // Thay b·∫±ng d·ªØ li·ªáu ƒë·ªông n·∫øu c√≥
                                borderColor: '#10b981',
                                backgroundColor: 'rgba(16, 185, 129, 0.2)',
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { position: 'top' }
                        },
                        scales: {
                            y: { beginAtZero: true }
                        }
                    }
                });
                // Update chart based on date range
                const dateRangeSelector = document.getElementById('dateRangeSelector');
                if (dateRangeSelector) {
                    dateRangeSelector.addEventListener('change', function() {
                        const range = this.value;
                        // C·∫≠p nh·∫≠t d·ªØ li·ªáu bi·ªÉu ƒë·ªì d·ª±a tr√™n range (g·ªçi API ho·∫∑c d·ªØ li·ªáu tƒ©nh)
                        chart.data.datasets[0].data = range === '7d' ? [100, 120, 150, 130, 170, 160, 180] :
                                                     range === '30d' ? [400, 450, 500, 480, 520, 510, 550] :
                                                     range === '90d' ? [1200, 1300, 1400, 1350, 1450, 1500, 1600] :
                                                     [5000, 5200, 5300, 5100, 5400, 5500, 5600];
                        chart.data.datasets[1].data = range === '7d' ? [20, 30, 25, 40, 35, 50, 45] :
                                                     range === '30d' ? [80, 90, 100, 95, 110, 120, 130] :
                                                     range === '90d' ? [200, 220, 250, 230, 260, 270, 280] :
                                                     [800, 850, 900, 880, 920, 950, 1000];
                        chart.update();
                    });
                }
            }
        });
    </script>
</body>
</html>