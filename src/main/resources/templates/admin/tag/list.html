<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Tags - EduShare Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;700&family=Open+Sans:wght@400;500;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/admin/admin.css}">
    <link rel="stylesheet" th:href="@{/css/admin/toast.css}">
    <link rel="stylesheet" th:href="@{/css/admin/tags.css}">
    <style type="text/css">
    .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 1rem;
            background-color: #f5f5f5;
            border-radius: 8px;
        }
        .tag-item {
            font-size: 1em;
            color: #4361ee;
            background-color: rgba(67, 97, 238, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 16px;
            text-decoration: none;
            transition: all 0.3s;
            white-space: nowrap;
        }
        .tag-item:hover {
            background-color: rgba(67, 97, 238, 0.2);
        }
        .time-filter, .filter-select {
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid #ccc;
            background-color: #fff;
            cursor: pointer;
            appearance: auto;
            -webkit-appearance: auto;
            -moz-appearance: auto;
            outline: none;
            font-size: 1rem;
            min-width: 150px;
        }
        .time-filter:focus, .filter-select:focus {
            border-color: #4361ee;
            box-shadow: 0 0 5px rgba(67, 97, 238, 0.3);
        }
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .section-actions {
            position: relative;
            z-index: 10;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal {
            background: #fff;
            padding: 2rem;
            border-radius: 8px;
            max-width: 500px;
            width: 90%;
        }
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        .modal-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .color-preview {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .color-square {
            width: 20px;
            height: 20px;
            border: 1px solid #ccc;
        }
        .form-actions {
            display: flex;
            gap: 1rem;
        }
        .submit-btn, .cancel-btn {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
        }
        .submit-btn {
            background-color: #4361ee;
            color: #fff;
            border: none;
        }
        .cancel-btn {
            background-color: #f5f5f5;
            border: 1px solid #ccc;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        .data-table th, .data-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .data-table th {
            background-color: #f5f5f5;
        }
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }
       
        .pagination-btn:hover:not(.disabled) {
            background-color: rgba(67, 97, 238, 0.1);
        }
        .pagination-btn.active {
            background-color: #4361ee;
            color: #fff;
        }
        .pagination-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            color: #999;
            background-color: #e0e0e0;
        }
        .pagination-ellipsis {
            display: inline-block;
            padding: 0.5rem;
            font-size: 1rem;
            color: #666;
        }
        .action-btn.delete-btn {
            color: #dc3545;
        }
        .action-btn.delete-btn:hover {
            background-color: #dc3545;
            color: white;
        }
        .action-btn.restore-btn {
            color: #28a745;
        }
        .action-btn.restore-btn:hover {
            background-color: #28a745;
            color: white;
        }
        
        /* Success and Error Messages */
        .success-message {
            background-color: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #16a34a;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }
        .success-message i {
            color: #16a34a;
            font-size: 1.1rem;
        }
        .error-message {
            background-color: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }
        .error-message i {
            color: #dc2626;
            font-size: 1.1rem;
        }
        
        /* Search form styling */
        .search-form {
            display: flex;
            align-items: center;
        }
        
        .search-input-container {
            position: relative;
            display: flex;
            align-items: center;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
            overflow: hidden;
        }
        
        .search-input-container .search-input {
            border: none;
            outline: none;
            padding: 8px 12px;
            font-size: 14px;
            min-width: 250px;
            background: transparent;
        }
        
        .search-input-container .search-input:focus {
            box-shadow: none;
        }
        
        .search-input-container:focus-within {
            border-color: #4361ee;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
        
        .clear-search-btn {
            background: none;
            border: none;
            padding: 8px;
            color: #6b7280;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
        }
        
        .clear-search-btn:hover {
            color: #dc2626;
        }
        
        .search-btn {
            background: #4361ee;
            border: none;
            padding: 8px 12px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        
        .search-btn:hover {
            background: #3651d4;
        }
        
    </style>
</head>
<body class="admin-body">
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="admin-header-content">
            <div class="admin-logo">
                <a href="/admin/dashboard" class="logo">
                    <div class="logo-icon">E</div>
                    <div class="logo-text">EduShare</div>
                </a>
            </div>
            <div class="admin-header-actions">
                <div class="admin-search">
                    <input type="text" placeholder="Tìm kiếm...">
                    <button><i class="fas fa-search"></i></button>
                </div>
                <div class="dark-mode-toggle" id="darkModeToggle"></div>
                <div class="admin-notifications">
                    <button class="notification-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">5</span>
                    </button>
                </div>
                <div class="admin-profile">
                    <div class="admin-avatar">
                        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Admin">
                    </div>
                    <div class="admin-info">
                        <span class="admin-name">Nguyễn Văn A</span>
                        <span class="admin-role">Quản trị viên</span>
                    </div>
                    <div class="admin-dropdown">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Admin Container -->
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <nav class="admin-nav">
                <ul class="admin-menu">
                    <li class="admin-menu-item">
                        <a th:href="@{/admin/dashboard}">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Bảng điều khiển</span>
                        </a>
                    </li>
                    <li class="admin-menu-item">
                        <a th:href="@{/admin/users}">
                            <i class="fas fa-users"></i>
                            <span>Quản lý người dùng</span>
                        </a>
                    </li>
                    <li class="admin-menu-item">
                        <a th:href="@{/admin/documents}">
                            <i class="fas fa-file-alt"></i>
                            <span>Quản lý tài liệu</span>
                        </a>
                    </li>
                    <li class="admin-menu-item">
                        <a th:href="@{/admin/categories}">
                            <i class="fas fa-folder"></i>
                            <span>Quản lý danh mục</span>
                        </a>
                    </li>
                    <li class="admin-menu-item active">
                        <a th:href="@{/admin/tags}">
                            <i class="fas fa-tags"></i>
                            <span>Quản lý tags</span>
                        </a>
                    </li>
                    <li class="admin-menu-item">
                        <a th:href="@{/admin/comments}">
                            <i class="fas fa-comments"></i>
                            <span>Quản lý bình luận</span>
                        </a>
                    </li>
                    <li class="admin-menu-item">
                        <a th:href="@{/admin/reports}">
                            <i class="fas fa-flag"></i>
                            <span>Báo cáo vi phạm</span>
                        </a>
                    </li>
                    <li class="admin-menu-item">
                        <a th:href="@{/admin/ip-bans}">
                            <i class="fas fa-ban"></i>
                            <span>IP bị cấm</span>
                        </a>
                    </li>
                    <li class="admin-menu-item">
                        <a th:href="@{/admin/statistics}">
                            <i class="fas fa-chart-bar"></i>
                            <span>Thống kê</span>
                        </a>
                    </li>
                    <li class="admin-menu-item has-submenu">
                        <a href="javascript:void(0)">
                            <i class="fas fa-coins"></i>
                            <span>Quản lý doanh thu</span>
                            <i class="fas fa-chevron-down submenu-icon"></i>
                        </a>
                        <ul class="submenu">
                            <li class="submenu-item">
                                <a th:href="@{/admin/coin-packages}">
                                    <i class="fas fa-box"></i>
                                    <span>Gói xu</span>
                                </a>
                            </li>
                            <li class="submenu-item">
                                <a th:href="@{/admin/revenue/transactions}">
                                    <i class="fas fa-exchange-alt"></i>
                                    <span>Giao dịch</span>
                                </a>
                            </li>
                            <li class="submenu-item">
                                <a th:href="@{/admin/revenue/withdrawals}">
                                    <i class="fas fa-money-bill-wave"></i>
                                    <span>Yêu cầu rút tiền</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="admin-menu-item">
                        <a th:href="@{/admin/settings}">
                            <i class="fas fa-cog"></i>
                            <span>Cài đặt</span>
                        </a>
                    </li>
                    <li class="admin-menu-item">
                        <a th:href="@{/logout}">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Đăng xuất</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        <!-- Main Content -->
        <main class="admin-content">
            <div class="admin-content-header">
                <h1 class="admin-page-title">Quản lý Tags</h1>
                <div class="admin-breadcrumbs">
                    <a th:href="@{/admin/dashboard}">Admin</a>
                    <span>/</span>
                    <span>Quản lý Tags</span>
                </div>
            </div>
            
            <!-- Success/Error Messages -->
            <div th:if="${success}" class="alert alert-success success-message">
                <i class="fas fa-check-circle"></i>
                <span th:text="${success}"></span>
            </div>
            <div th:if="${error}" class="alert alert-danger error-message">
                <i class="fas fa-exclamation-triangle"></i>
                <span th:text="${error}"></span>
            </div>
            <!-- Tag Management Tools -->
            <div class="management-tools">
                <div class="search-filters">
                    <div class="tool-item">
                        <form th:action="@{/admin/tags}" method="get" class="search-form">
                            <div class="search-input-container">
                                <input type="text" name="search" placeholder="Tìm kiếm tag..." class="search-input" 
                                       th:value="${param.search}" id="tagSearchInput">
                                <button type="button" class="clear-search-btn" id="clearSearchBtn" 
                                        th:if="${param.search != null and !param.search.isEmpty()}"
                                        onclick="clearSearch()">
                                    <i class="fas fa-times"></i>
                                </button>
                                <button type="submit" class="search-btn">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                            <input type="hidden" name="page" value="0">
                            <input type="hidden" name="size" th:value="${pageSize}">
                            <input type="hidden" name="filter" th:value="${filter}">
                            <input type="hidden" name="sort" th:value="${sort}">
                        </form>
                    </div>
                    <div class="tool-item">
                        <form id="sortForm" th:action="@{/admin/tags}" method="get">
                            <input type="hidden" name="page" th:value="${currentPage}">
                            <input type="hidden" name="size" th:value="${pageSize}">
                            <input type="hidden" name="filter" th:value="${filter}">
                            <input type="hidden" name="search" th:value="${param.search}">
                            <select class="filter-select" name="sort" onchange="this.form.submit()">
                                <option value="none" th:selected="${sort == 'none' or sort == null}">Sắp xếp theo</option>
                                <option value="name_asc" th:selected="${sort == 'name_asc'}">Tên (A-Z)</option>
                                <option value="name_desc" th:selected="${sort == 'name_desc'}">Tên (Z-A)</option>
                                <option value="popular" th:selected="${sort == 'popular'}">Phổ biến nhất</option>
                                <option value="recent" th:selected="${sort == 'recent'}">Gần đây nhất</option>
                            </select>
                        </form>
                    </div>
                </div>
                <div class="action-buttons">
                    <a th:href="@{/admin/tags/create}" class="add-new-btn" id="addTagBtn">
                        <i class="fas fa-plus"></i> Thêm tag mới
                    </a>
                    <button type="button" class="btn btn-outline" id="exportTagsBtn"
                            style="background: transparent; color: #4b5563; border: 1px solid #d1d5db; padding: 8px 16px; border-radius: 6px; display: inline-flex; align-items: center; gap: 8px;">
                        <i class="fas fa-download"></i><span>Export</span>
                    </button>
                </div>
            </div>
            <!-- Tags Overview Cards -->
            <div class="tags-overview">
                <div class="overview-card">
                    <div class="overview-icon">
                        <i class="fas fa-tags"></i>
                    </div>
                    <div class="overview-info">
                        <h3>Tổng số tags</h3>
                        <div class="overview-number" th:text="${totalItems}"></div>
                    </div>
                </div>
                <div class="overview-card">
                    <div class="overview-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="overview-info">
                        <h3>Tài liệu có gắn tag</h3>
                        <div class="overview-number" th:text="${documentsWithTags}"></div>
                    </div>
                </div>
                <div class="overview-card">
                    <div class="overview-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="overview-info">
                        <h3>Tags không sử dụng</h3>
                        <div class="overview-number" th:text="${unusedTags ?: 0}">0</div>
                    </div>
                </div>
                <div class="overview-card">
                    <div class="overview-icon">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <div class="overview-info">
                        <h3>Tags mới trong tháng</h3>
                        <div class="overview-number" th:text="${newTagsThisMonth}"></div>
                    </div>
                </div>
            </div>

            <!-- Search Result Message 
            <div th:if="${param.search != null and !param.search.isEmpty()}" 
                 class="alert alert-info" style="margin-bottom: 20px;">
                <i class="fas fa-search"></i>
                Kết quả tìm kiếm cho "<strong th:text="${param.search}"></strong>": 
                <span th:text="${totalItems}"></span> tag(s) được tìm thấy
                <a th:href="@{/admin/tags(page=0, size=${pageSize}, filter=${filter}, sort=${sort})}" 
                   class="btn btn-sm btn-outline-secondary ms-2">
                    <i class="fas fa-times"></i> Xóa tìm kiếm
                </a>
            </div>-->

            <!-- Tags Table -->
            <div class="data-container">
                <table class="data-table" th:if="${tags != null and not #lists.isEmpty(tags.content)}">
    <thead>
        <tr>
         <!--    <th>
                <div class="checkbox-wrapper">
                    <input type="checkbox" id="selectAll">
                    <label for="selectAll"></label>
                </div>
            </th>-->
            <th>STT</th>
            <th>Tag</th>
            <th>Số tài liệu</th>
            <th>Ngày tạo</th>
            <th>Trạng thái</th>
            <th>Thao tác</th>
        </tr>
    </thead>
    <tbody>
       <tr th:each="tag, iterStat : ${tags.content}">
                    <!--   <td>
                            <div class="checkbox-wrapper">
                                <input type="checkbox" th:id="'tag' + ${iterStat.count}">
                                <label th:for="'tag' + ${iterStat.count}"></label>
                            </div>
                        </td>--> 
                        <td th:text="${iterStat.count + (currentPage * pageSize)}"></td>
                        <td>
                            <div class="tag-preview">
                                <span class="tag-label" th:text="${tag.name}" style="background-color: rgba(67, 97, 238, 0.1); color: var(--primary);"></span>
                            </div>
                        </td>
                        <td th:text="${tag.documentCount ?: 0}">0</td>
                        <td th:text="${#temporals.format(tag.createdAt, 'dd/MM/yyyy')}"></td>
                        <td>
                            <span th:class="${tag.status == 'active'} ? 'status-badge approved' : 'status-badge rejected'"
                                  th:text="${tag.status == 'active' ? 'Hoạt động' : 'Vô hiệu hóa'}"></span>
                        </td>
                        <td>
                            <div class="action-buttons">
                                <a th:href="@{/admin/tags/{id}/edit(id=${tag.id}, page=${currentPage}, size=${pageSize}, filter=${filter}, sort=${sort}, search=${param.search})}" class="action-btn" title="Chỉnh sửa"><i class="fas fa-edit"></i></a>
                                <a th:href="@{/admin/tags/{id}/details(id=${tag.id}, page=${currentPage}, size=${pageSize}, filter=${filter}, sort=${sort}, search=${param.search})}" class="action-btn" title="Xem chi tiết"><i class="fas fa-file-alt"></i></a>
                                
                                <!-- Nút khôi phục cho tags bị vô hiệu hóa -->
                                <a th:if="${tag.status == 'inactive'}" th:href="@{/admin/tags/{id}/restore(id=${tag.id})}" class="action-btn restore-btn" title="Khôi phục tag">
                                    <i class="fas fa-undo"></i>
                                </a>
                                
                                <!-- Chỉ hiển thị delete button cho tag chưa bị xóa vĩnh viễn -->
                                <a th:if="${tag.deletedAt == null}" th:href="@{/admin/tags/{id}/delete(id=${tag.id})}" class="action-btn delete-btn" title="Xóa tag vĩnh viễn">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                </tbody>
    </tbody>
</table>
                <div class="data-container" th:if="${tags == null or #lists.isEmpty(tags.content)}">
                    <div class="text-center py-4">
                        <i class="fas fa-search fa-3x text-muted mb-3"></i>
                        <p th:if="${param.search != null and !param.search.isEmpty()}" class="text-muted">
                            Không tìm thấy tag nào với từ khóa "<strong th:text="${param.search}"></strong>"
                        </p>
                        <p th:if="${param.search == null or param.search.isEmpty()}" class="text-muted">
                            Không có tag nào để hiển thị
                        </p>
                        <a th:href="@{/admin/tags}" class="btn btn-primary mt-2" th:if="${param.search != null and !param.search.isEmpty()}">
                            <i class="fas fa-list"></i> Xem tất cả tags
                        </a>
                    </div>
                </div>
            </div>
            <!-- Pagination -->
           <div class="pagination" th:if="${totalPages > 0}">
    <!-- Nút Prev -->
    <a th:if="${currentPage > 0}"
       th:href="@{/admin/tags(page=${currentPage - 1}, size=${pageSize}, filter=${filter != null ? filter : ''}, sort=${sort != null ? sort : ''}, search=${param.search != null ? param.search : ''})}"
       class="pagination-btn prev-btn">
        <i class="fas fa-chevron-left"></i>
    </a>
    <a th:if="${currentPage == 0}" class="pagination-btn prev-btn disabled" href="javascript:void(0)">
        <i class="fas fa-chevron-left"></i>
    </a>

    <!-- Danh sách trang -->
    <div class="pagination-pages">
        <!-- Trang đầu -->
        <a th:href="@{/admin/tags(page=0, size=${pageSize}, filter=${filter != null ? filter : ''}, sort=${sort != null ? sort : ''}, search=${param.search != null ? param.search : ''})}"
           th:class="${currentPage == 0 ? 'pagination-btn page-btn active' : 'pagination-btn page-btn'}">1</a>

        <!-- Dấu chấm lửng nếu có hơn 4 trang và currentPage >= 3 -->
        <span th:if="${totalPages > 4 and currentPage >= 3}" class="pagination-ellipsis">...</span>

        <!-- Các trang giữa (hiển thị 2 trang gần currentPage) -->
        <a th:each="i : ${#numbers.sequence(currentPage - 1, currentPage + 1)}"
           th:if="${i > 0 and i < totalPages - 1}"
           th:href="@{/admin/tags(page=${i}, size=${pageSize}, filter=${filter != null ? filter : ''}, sort=${sort != null ? sort : ''}, search=${param.search != null ? param.search : ''})}"
           th:class="${i == currentPage ? 'pagination-btn page-btn active' : 'pagination-btn page-btn'}"
           th:text="${i + 1}"></a>

        <!-- Dấu chấm lửng nếu có hơn 4 trang và currentPage < totalPages - 2 -->
        <span th:if="${totalPages > 4 and currentPage < totalPages - 2}" class="pagination-ellipsis">...</span>

        <!-- Trang cuối (hiển thị nếu totalPages > 1) -->
        <a th:if="${totalPages > 1}"
           th:href="@{/admin/tags(page=${totalPages - 1}, size=${pageSize}, filter=${filter != null ? filter : ''}, sort=${sort != null ? sort : ''}, search=${param.search != null ? param.search : ''})}"
           th:class="${currentPage == totalPages - 1 ? 'pagination-btn page-btn active' : 'pagination-btn page-btn'}"
           th:text="${totalPages}"></a>
    </div>

    <!-- Nút Next -->
    <a th:if="${currentPage < totalPages - 1}"
       th:href="@{/admin/tags(page=${currentPage + 1}, size=${pageSize}, filter=${filter != null ? filter : ''}, sort=${sort != null ? sort : ''}, search=${param.search != null ? param.search : ''})}"
       class="pagination-btn next-btn">
        <i class="fas fa-chevron-right"></i>
    </a>
    <a th:if="${currentPage == totalPages - 1}" class="pagination-btn next-btn disabled" href="javascript:void(0)">
        <i class="fas fa-chevron-right"></i>
    </a>
</div>
        </main>
    </div>
    <!-- Add Tag Modal -->
    <div class="modal-overlay" th:if="${modalOpen}">
        <div class="modal" id="addTagModal">
            <button class="modal-close">&times;</button>
            <div class="modal-header">
                <h2>Thêm Tag Mới</h2>
            </div>
            <form th:action="@{/admin/tags/create}" method="post" class="modal-form">
                <div class="form-group">
                    <label for="tagName">Tên Tag</label>
                    <input type="text" id="tagName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="tagSlug">Slug</label>
                    <input type="text" id="tagSlug" name="slug" required>
                </div>
                <div class="form-group">
                    <label for="tagColor">Màu Tag</label>
                    <input type="color" id="tagColor" name="color" value="#4361ee">
                    <div class="color-preview">
                        <span class="color-square" style="background-color: #4361ee;"></span>
                        <span class="color-hex">#4361ee</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>Preview</label>
                    <span class="tag-label tag-preview-label" style="background-color: rgba(67, 97, 238, 0.1); color: #4361ee;">Tag Name</span>
                </div>
                <div class="form-actions">
                    <button type="submit" class="submit-btn">Thêm Tag</button>
                    <button type="button" class="cancel-btn">Hủy</button>
                </div>
            </form>
        </div>
    </div>
    <script th:src="@{/js/main.js}"></script>
    <script th:src="@{/js/admin/admin.js}"></script>
    <script th:src="@{/js/admin/tags.js}"></script>
    
    <script>
        function clearSearch() {
            const searchInput = document.getElementById('tagSearchInput');
            searchInput.value = '';
            
            // Submit form to clear search
            const form = searchInput.closest('form');
            form.submit();
        }
        
        // Show/hide clear button based on input value
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('tagSearchInput');
            const clearBtn = document.getElementById('clearSearchBtn');
            
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    if (clearBtn) {
                        clearBtn.style.display = this.value.trim() ? 'flex' : 'none';
                    }
                });
            }
        });
    </script>
</body>
</html>