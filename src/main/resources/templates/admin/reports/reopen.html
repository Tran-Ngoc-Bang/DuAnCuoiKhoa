<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Xác nhận Mở lại</title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&family=Open+Sans:wght@400;500;600&family=Playfair+Display:wght@700&display=swap"
    rel="stylesheet" />

  <!-- Custom CSS -->
  <link rel="stylesheet" th:href="@{/css/main.css}" />
  <link rel="stylesheet" th:href="@{/css/admin/admin.css}" />
  <link rel="stylesheet" th:href="@{/css/admin/reports.css}" />
 <link rel="stylesheet" th:href="@{/css/admin/notifications.css}"/>
  <script th:src="@{/js/admin/notifications.js}"></script>
</head>

<body class="admin-body">
  <!-- Admin Header -->
  <div th:replace="~{fragments/admin/layout :: header}"></div>

  <div class="admin-container">
    <!-- Sidebar -->
    <div th:replace="~{fragments/admin/sidebar :: admin-sidebar}"></div>

    <!-- Main Content -->
    <main class="admin-content">
      <div class="admin-content-header">
        <h1 class="admin-page-title text-danger">Xác nhận chuyển trạng thái "Mở lại" cho Báo cáo</h1>
        <div class="admin-breadcrumbs">
          <a th:href="@{/admin}">Admin</a><span>/</span>
          <a th:href="@{/admin/reports}">Báo cáo vi phạm</a><span>/</span>
          <span>Chuyển trạng thái</span>
        </div>
      </div>

      <div class="form-container">
        <div class="container mt-4">
          <div class="alert alert-warning">
            <strong>Bạn có chắc chắn muốn chuyển trạng thái "Mở lại" cho Báo cáo này không?</strong>
          </div>

          <!-- START: Thông tin chi tiết báo cáo -->
          <div class="report-detail" th:object="${report}">
            <div class="report-overview">
              <div class="report-status">
                <span class="status-label">Trạng thái:</span>
                <span class="status-badge" th:text="${report.status}">Mở lại</span>
              </div>
              <div class="report-date">
                <span class="date-label">Ngày báo cáo:</span>
                <span class="date-value"
                  th:text="${#temporals.format(report.createdAt, 'dd/MM/yyyy - HH:mm')}">15/04/2023 - 10:24 AM</span>
              </div>
            </div>

            <div class="report-sections">
              <div class="report-section">
                <h4 class="section-title">
                  <i class="fas fa-flag"></i> Thông tin báo cáo
                </h4>
                <div class="section-content">
                  <div class="info-row">
                    <div class="info-label">Loại vi phạm</div>
                    <div class="info-value">
                      <span class="violation-type" th:text="${report.type}">Vi phạm bản quyền</span>
                    </div>
                  </div>
                  <div class="info-row">
                    <div class="info-label">Người báo cáo</div>
                    <div class="info-value">
                      <div class="user-info">
                        <img
                          th:src="${report.reporter.avatarUrl != null} ? @{${report.reporter.avatarUrl}} : @{/assets/images/default-avatar.png}"
                          alt="Avatar">
                        <div class="user-details">
                          <div class="user-name" th:text="${report.reporter.fullName}">Trần Thị B</div>
                          <div class="user-email" th:text="${report.reporter.email}">tranthib@example.com</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="info-row full-width">
                    <div class="info-label">Mô tả vi phạm</div>
                    <div class="info-value description">
                      <p th:text="${report.reason}">Mô tả chi tiết vi phạm...</p>
                    </div>
                  </div>
                  <!-- Optional: Bằng chứng -->
                  <div class="info-row full-width">
                    <div class="info-label">Bằng chứng</div>
                    <div class="info-value evidence">
                      <div class="evidence-items">
                        <div class="evidence-item">
                          <img
                            src="https://images.unsplash.com/photo-1606857521015-7f9fcf423740?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&h=200&q=80"
                            alt="Bằng chứng 1">
                          <div class="evidence-overlay">
                            <button class="view-evidence-btn"><i class="fas fa-search-plus"></i></button>
                          </div>
                        </div>
                        <div class="evidence-item">
                          <img
                            src="https://images.unsplash.com/photo-1586282391535-74bc5c28a1f0?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&h=200&q=80"
                            alt="Bằng chứng 2">
                          <div class="evidence-overlay">
                            <button class="view-evidence-btn"><i class="fas fa-search-plus"></i></button>
                          </div>
                        </div>
                        <div class="evidence-item document">
                          <div class="evidence-document">
                            <i class="fas fa-file-pdf"></i>
                            <span>copyright_proof.pdf</span>
                          </div>
                          <div class="evidence-overlay">
                            <button class="download-evidence-btn"><i class="fas fa-download"></i></button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="report-section">
                <h4 class="section-title"><i class="fas fa-file-alt"></i> Thông tin tài liệu báo cáo</h4>
                <div class="section-content">
                  <div class="document-card">
                    <div class="document-preview">
                      <img src="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?ixlib=rb-1.2.1&auto=format&fit=crop&w=400&h=300&q=80"
                       alt="Document Preview">
                      <div class="document-icon-overlay"><i class="fas fa-file-pdf"></i></div>
                    </div>
                    <div class="document-details">
                      <h4 class="document-title" th:text="${report.document.title}">Tên tài liệu</h4>
                      <div class="document-meta">
                        <div class="meta-item">
                          <i class="fas fa-user"></i> <span>Nguyễn Văn
                            A</span>
                        </div>
                        <div class="meta-item">
                          <i class="fas fa-calendar"></i> Đăng ngày: <span
                            th:text="${#temporals.format(report.document.createdAt, 'dd/MM/yyyy')}"></span>
                        </div>
                        <div class="meta-item">
                          <i class="fas fa-download"></i> <span th:text="${report.document.downloadsCount}">5.2K</span>
                          lượt tải
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="report-section">
                <h4 class="section-title"><i class="fas fa-history"></i> Lịch sử xử lý</h4>
                <div class="section-content">
                  <div class="history-timeline">
                    <div class="timeline-item">
                      <div class="timeline-icon"><i class="fas fa-flag"></i></div>
                      <div class="timeline-content">
                        <div class="timeline-header">
                          <span class="timeline-title">Báo cáo được tạo</span>
                          <span class="timeline-date"
                            th:text="${#temporals.format(report.createdAt, 'dd/MM/yyyy - HH:mm')}"></span>
                        </div>
                        <div class="timeline-body">
                          <span th:text="${report.reporter.fullName}"></span> đã tạo báo cáo cho tài liệu <strong
                            th:text="${report.document.title}"></strong>.
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-12 mt-4">
              <form th:action="@{'/admin/reports/' + ${report.id} + '/reopen'}" method="post">
                <button class="btn btn-danger" type="submit">
                  <i class="fas fa-check"></i> Xác nhận chuyển trạng thái
                </button>
                <a th:href="@{/admin/reports}" class="btn btn-secondary ms-2">
                  <i class="fas fa-arrow-left"></i> Huỷ bỏ
                </a>
              </form>
            </div>
          </div>
        </div>
      </div>

    </main>
  </div>
</body>

</html>