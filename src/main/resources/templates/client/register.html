<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Đăng ký - EduShare</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&family=Open+Sans:wght@400;500;600&family=Playfair+Display:wght@700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/css/responsive.css}" />
    <link rel="stylesheet" th:href="@{/css/main-fixes.css}" />
    <link rel="stylesheet" th:href="@{/css/auth.css}" />
    <link rel="stylesheet" th:href="@{/css/footer-modern.css}" />
    <link rel="stylesheet" th:href="@{/css/password-recovery.css}" />
    <link rel="stylesheet" th:href="@{/css/client-header.css}" />
    <link rel="stylesheet" th:href="@{/css/client-footer.css}" />
    <link rel="stylesheet" th:href="@{/css/admin/toast.css}" />
    
    <!-- Flash Toast Meta Tags -->
    <meta name="flash-success" th:content="${success}" th:if="${success}"/>
    <meta name="flash-error" th:content="${error}" th:if="${error}"/>
    <meta name="flash-warning" th:content="${warning}" th:if="${warning}"/>
    <meta name="flash-info" th:content="${info}" th:if="${info}"/>
    <style type="text/css">
    .alert { padding: 10px; margin-bottom: 15px; border-radius: 4px; }
        .alert-danger { background-color: #f8d7da; color: #721c24; }
        .alert-success { background-color: #d4edda; color: #155724; }
        .form-group { margin-bottom: 15px; }
        .input-group { position: relative; }
        .input-icon { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); }
        .password-toggle { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; }
        .password-strength { margin-top: 5px; }
        .strength-meter { width: 100%; height: 5px; background: #e0e0e0; border-radius: 3px; }
        .strength-bar { height: 100%; border-radius: 3px; width: 0; transition: width 0.3s, background-color 0.3s; }
        .btn-primary { background-color: #007bff; color: white; padding: 10px; width: 100%; border: none; border-radius: 4px; cursor: pointer; }
        .form-footer { text-align: center; margin-top: 10px; } </style>
  </head>
  <body>
    <!-- Header -->
    <div th:replace="~{fragments/client/layout :: header}"></div>
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <a href="/">
              <div class="logo-icon">E</div>
              <span class="logo-text">EduShare</span>
            </a>
          </div>
          <nav class="main-nav">
            <a href="../index.html" class="nav-link">Trang chủ</a>
            <a href="categories.html" class="nav-link">Danh mục</a>
            <a href="search.html?sort=newest" class="nav-link">Tài liệu mới</a>
            <a href="search.html?filter=premium" class="nav-link">Cao cấp</a>
            <a href="about.html" class="nav-link">Giới thiệu</a>
          </nav>
          <div class="header-actions">
            <button
              class="dark-mode-toggle"
              id="darkModeToggle"
              type="button"
              aria-label="Toggle dark mode"
            >
              <span class="dark-mode-handle" id="darkModeHandle"></span>
            </button>
            <a href="/login" class="login-btn">
              <i class="fas fa-sign-in-alt"></i> Đăng nhập
            </a>
            <a href="/register" class="register-btn active">
              <i class="fas fa-user-plus"></i> Đăng ký
            </a>
          </div>
          <div class="mobile-menu-toggle" id="mobileMenuBtn">
            <i class="fas fa-bars"></i>
          </div>
        </div>
      </div>
      <!-- Mobile menu -->
      <div id="mobileMenu" class="mobile-menu">
        <div class="mobile-search">
          <input type="text" placeholder="Tìm kiếm tài liệu..." />
          <button>
            <i class="fas fa-search"></i>
          </button>
        </div>
        <nav class="mobile-nav">
          <a href="../index.html" class="mobile-nav-link">Trang chủ</a>
          <a href="categories.html" class="mobile-nav-link">Danh mục</a>
          <a href="search.html?sort=newest" class="mobile-nav-link"
            >Tài liệu mới</a
          >
          <a href="search.html?filter=premium" class="mobile-nav-link"
            >Cao cấp</a
          >
          <a href="#" class="mobile-nav-link">Hướng dẫn</a>
        </nav>
        <div class="mobile-auth">
          <a href="/login" class="mobile-login-btn">Đăng nhập</a>
          <a href="/register" class="mobile-register-btn">Đăng ký</a>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main>
      <section class="auth-section">
        <div class="auth-container">
          <div class="auth-header">
            <div class="auth-header-content">
              <h1>Tham gia cộng đồng học tập</h1>
              <p>
                Chia sẻ kiến thức, kết nối và phát triển cùng 500,000+ thành
                viên EduShare
              </p>
            </div>
          </div>

          <div class="auth-body">
            <div class="auth-tabs">
              <button class="auth-tab" data-tab="login">
                <a href="/login">Đăng nhập</a>
              </button>
              <button class="auth-tab active" data-tab="register">
                Đăng ký
              </button>
            </div>

            <div class="auth-forms">
              <!-- Auth Error/Success Message -->
              <div class="auth-error">
                <i class="fas fa-exclamation-circle"></i>
                <span class="error-message"
                  >Email đã được sử dụng. Vui lòng chọn email khác.</span
                >
              </div>

              <div class="auth-success">
                <i class="fas fa-check-circle"></i>
                <span class="success-message"
                  >Đăng ký thành công. Đang chuyển hướng...</span
                >
              </div>

              <!-- Register Form -->
              <form
                id="registerForm"
                class="auth-form active"
                data-form="register"
                action="/register"
                method="post"
              >
                  
                <h2 class="form-title">Tạo tài khoản mới</h2>
                <p class="form-description">
                  Gia nhập cộng đồng và bắt đầu chia sẻ kiến thức
                </p>
                <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>
                <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
                <div class="form-row">
                 
                  <div class="form-group">
                    <label for="registerFirstName">Họ</label>
                    <div class="input-group">
                      <span class="input-icon"
                        ><i class="fas fa-user"></i
                      ></span>
                      <input
                        type="text"
                        id="registerFirstName"
                        placeholder="Nhập họ"
                        name="firstName"
                        th:value="${param.firstName}"
                        required
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="registerLastName">Tên</label>
                    <div class="input-group">
                      <span class="input-icon"
                        ><i class="fas fa-user"></i
                      ></span>
                      <input
                        type="text"
                        id="registerLastName"
                        placeholder="Nhập tên"
                        name="lastName"
                        th:value="${param.lastName}"
                        required
                      />
                    </div>
                  </div>
                </div>
  <div class="form-group">
                <label for="registerUsername">Tên đăng nhập</label>
                <div class="input-group">
                    <span class="input-icon"><i class="fas fa-user-circle"></i></span>
                    <input
                        type="text"
                        id="registerUsername"
                        name="username"
                        th:value="${param.username}"
                        placeholder="Nhập tên đăng nhập"
                        required
                    />
                </div>
            </div>
                <div class="form-group">
                  <label for="registerEmail">Email</label>
                  <div class="input-group">
                    <span class="input-icon"
                      ><i class="fas fa-envelope"></i
                    ></span>
                    <input
                      type="email"
                      id="registerEmail"
                      placeholder="Nhập địa chỉ email"
                      name="email"
                      th:value="${param.email}"
                      required
                    />
                  </div>
                </div>

                <div class="form-group">
                  <label for="registerPassword">Mật khẩu</label>
                  <div class="input-group">
                    <span class="input-icon"><i class="fas fa-lock"></i></span>
                    <input
                      type="password"
                      id="registerPassword"
                      placeholder="Tạo mật khẩu"
                      name="password"
                      required
                    />
                    <button type="button" class="password-toggle">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                  <div class="password-strength">
                    <div class="strength-meter">
                      <div class="strength-bar"></div>
                    </div>
                    <div class="strength-text">Độ mạnh: <span>Yếu</span></div>
                  </div>
                </div>

                <div class="form-group">
                  <label for="registerConfirmPassword">Xác nhận mật khẩu</label>
                  <div class="input-group">
                    <span class="input-icon"><i class="fas fa-lock"></i></span>
                    <input
                      type="password"
                      id="registerConfirmPassword"
                      name="confirmPassword"
                      placeholder="Nhập lại mật khẩu"
                      required
                    />
                    <button type="button" class="password-toggle">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </div>

                <div class="form-options">
                  <label class="checkbox-label">
                    <input type="checkbox" id="termsAgreement"name="termsAgreement" required />
                    <span
                      >Tôi đồng ý với
                      <a href="#" target="_blank">Điều khoản sử dụng</a> và
                      <a href="#" target="_blank">Chính sách bảo mật</a></span
                    >
                  </label>
                </div>

                <button
                  type="submit"
                  class="btn btn-primary btn-block register-submit-btn"
                >
                  Tạo tài khoản
                </button>

                <div class="form-footer">
                  <p>Đã có tài khoản? <a href="/login">Đăng nhập ngay</a></p>
                  <p><a href="/forgot-password" class="">Quên mật khẩu?</a></p>
                </div>
              </form>
            </div>

            <!-- Feature Cards for Mobile -->
            <div class="features-area">
              <h3 class="features-title">Lợi ích thành viên</h3>

              <div class="features-grid">
                <div class="feature-card">
                  <div class="feature-card-icon">
                    <i class="fas fa-download"></i>
                  </div>
                  <h3>Tải tài liệu miễn phí</h3>
                  <p>
                    Tiếp cận hàng nghìn tài liệu miễn phí từ cộng đồng học tập.
                  </p>
                </div>

                <div class="feature-card">
                  <div class="feature-card-icon">
                    <i class="fas fa-upload"></i>
                  </div>
                  <h3>Chia sẻ tài liệu</h3>
                  <p>Đóng góp tài liệu và giúp đỡ những người học khác.</p>
                </div>

                <div class="feature-card">
                  <div class="feature-card-icon">
                    <i class="fas fa-star"></i>
                  </div>
                  <h3>Đánh giá nội dung</h3>
                  <p>Thêm đánh giá và góp phần nâng cao chất lượng tài liệu.</p>
                </div>

                <div class="feature-card">
                  <div class="feature-card-icon">
                    <i class="fas fa-comments"></i>
                  </div>
                  <h3>Tham gia thảo luận</h3>
                  <p>Kết nối và học hỏi từ cộng đồng những người cùng ngành.</p>
                </div>
              </div>

              <div class="stats-section">
                <div class="stat-item">
                  <div class="stat-value">500K+</div>
                  <div class="stat-label">thành viên</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value">200K+</div>
                  <div class="stat-label">tài liệu</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value">5M+</div>
                  <div class="stat-label">lượt tải</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Forgot Password Modal -->
    <div class="modal" id="forgotPasswordModal">
      <div class="modal-overlay"></div>
      <div class="modal-container">
        <div class="modal-header">
          <h3>Khôi phục mật khẩu</h3>
          <button class="modal-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
          <!-- Form chính -->
          <div id="forgotPasswordFormContainer">
            <p class="modal-description">
              Vui lòng nhập địa chỉ email đã đăng ký. Chúng tôi sẽ gửi cho bạn
              liên kết để đặt lại mật khẩu.
            </p>

            <form id="forgotPasswordForm">
              <div class="form-group">
                <label for="resetEmail">Email</label>
                <div class="input-group">
                  <span class="input-icon"
                    ><i class="fas fa-envelope"></i
                  ></span>
                  <input
                    type="email"
                    id="resetEmail"
                    placeholder="Nhập địa chỉ email"
                    required
                  />
                </div>
              </div>
            </form>
          </div>

          <!-- Thông báo thành công (sẽ hiển thị bằng JS) -->
          <div
            id="forgotPasswordSuccess"
            class="forgot-success"
            style="display: none"
          >
            <div class="forgot-success-icon">
              <i class="fas fa-check"></i>
            </div>
            <h4 class="forgot-success-title">Yêu cầu đã được gửi!</h4>
            <p class="forgot-success-message">
              Chúng tôi đã gửi email chứa liên kết đặt lại mật khẩu đến địa chỉ
              của bạn. Vui lòng kiểm tra hộp thư và làm theo hướng dẫn.
            </p>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline cancel-btn">
            Hủy bỏ
          </button>
          <button type="button" class="btn btn-primary submit-btn">
            Gửi yêu cầu
          </button>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div th:replace="~{fragments/client/layout :: footer}"></div>
    <div class="toast-container" id="toastContainer"></div>
    <!-- Scripts -->
    <script th:src="@{/js/main.js}"></script>
    <script th:src="@{/js/auth.js}"></script>
    <script th:src="@{/js/client-header.js}"></script>
    <script th:src="@{/js/admin/toast.js}"></script>
    <script th:src="@{/js/admin/flash-toast.js}"></script>
  </body>
</html>
