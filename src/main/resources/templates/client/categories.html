<!DOCTYPE html>
<html
  lang="vi"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <title>Danh mục tài liệu - EduShare</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Open+Sans:wght@400;500;600&family=Playfair+Display:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/css/responsive.css}" />
    <link rel="stylesheet" th:href="@{/css/main-fixes.css}" />
    <link rel="stylesheet" th:href="@{/css/categories.css}" />
    <link rel="stylesheet" th:href="@{/css/categories-hero-modern.css}" />
    <link rel="stylesheet" th:href="@{/css/categories-section-modern.css}" />
    <link rel="stylesheet" th:href="@{/css/footer-modern.css}" />
    <link rel="stylesheet" th:href="@{/css/client-header.css}" />
    <link rel="stylesheet" th:href="@{/css/client-footer.css}" />
  </head>
  <body>
    <!-- Header -->
    <div th:replace="~{fragments/client/layout :: header}"></div>

    <main>
      <!-- Hero Section with Search -->
      <section class="categories-hero">
        <!-- Background Shapes -->
        <div class="hero-shapes">
          <div class="hero-shape hero-shape-1"></div>
          <div class="hero-shape hero-shape-2"></div>
          <div class="hero-shape hero-shape-3"></div>
        </div>

        <div class="container">
          <div class="hero-content-wrapper">
            <div class="hero-text">
              <h1 class="hero-title">
                <span>Khám Phá</span>
                <span class="hero-title-highlight">Kho Tài Liệu Đa Dạng</span>
              </h1>
              <p class="hero-description">
                Truy cập hàng nghìn tài liệu chất lượng cao trong nhiều lĩnh
                vực. Tìm kiếm tri thức mới, chia sẻ và cùng nhau phát triển cộng
                đồng học tập của bạn.
              </p>

              <div class="hero-actions">
                <a href="search.html" class="hero-button hero-button-primary">
                  <i class="fas fa-search"></i> Tìm tài liệu
                </a>
                <a href="upload" class="hero-button hero-button-secondary">
                  <i class="fas fa-upload"></i> Đóng góp tài liệu
                </a>
              </div>
            </div>

            <div class="hero-visual">
              <div class="hero-illustration"></div>
              <div class="hero-cards">
                <div class="hero-card">
                  <i class="fas fa-book"></i>
                </div>
                <div class="hero-card">
                  <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="hero-card">
                  <i class="fas fa-atom"></i>
                </div>
                <div class="hero-card">
                  <i class="fas fa-chart-line"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Categories Section -->
      <section class="categories-section">
        <div class="container">
          <div class="section-header">
            <h2 class="section-title">Danh Mục Tài Liệu</h2>
            <p class="section-description">
              Chọn lĩnh vực bạn quan tâm và khám phá kho tài liệu chất lượng cao
            </p>
          </div>

          <div class="category-filter-tabs">
            <a href="/categories" th:classappend="${selectedCategory == null} ? 'active' : ''" class="category-tab" data-filter="all">
              Tất cả danh mục
            </a>
            <a class="category-tab" data-filter="education" th:each="category : ${rootCategories}" th:href="@{/categories(category=${category.slug})}" th:classappend="${selectedCategory == category.slug} ? 'active' : ''" th:text="${category.name}"></a>
          </div>

          <div class="categories-container">
            <div class="category-card" th:each="category : ${displayCategories}" data-group="tech">
              <div class="category-header">
                <div class="category-icon-container icon-it">
                  <i class="fas fa-laptop-code"></i>
                </div>
                <h3  th:text="${category.name}" class="category-title">Công nghệ thông tin</h3>
                <span th:text="${category.documents} + ' tài liệu'" class="document-count">2,415 tài liệu</span>
              </div>

              <div class="category-content">
                <p th:text="${category.description}" class="category-description">
                  Khám phá các tài liệu về lập trình, phát triển ứng dụng, mạng
                  máy tính, trí tuệ nhân tạo và các lĩnh vực công nghệ khác.
                </p>
                <div class="subcategories" th:if="${category.subcategories > 0}">
                <ul class="subcategories-list" th:each="subcategory : ${subcategoriesMap.get(category.id)}" >
                  <li class="subcategory-item">
                    <i class="fas fa-angle-right"></i>
                    <a
                    th:href="@{/categories(category=${subcategory.slug})}" th:text="${subcategory.name}"
                      class="subcategory-name"
                      >Lập trình & Phát triển phần mềm</a
                    >
                  </li>
                </ul>
                </div>
              </div>
              <div class="category-footer">
                <a th:href="@{/categories(category=${category.slug})}" class="category-view-all">
                  Xem tất cả tài liệu <i class="fas fa-arrow-right"></i>
                </a>
              </div>
            </div>
      </section>

       <!-- Popular Topics Section -->
      <section class="topics-section">
        <div class="container">
          <div class="section-header">
            <h2 class="section-title">Chủ Đề Nổi Bật</h2>
            <p class="section-description">
              Khám phá các chủ đề được quan tâm nhiều nhất hiện nay
            </p>
          </div>

          <div class="topics-wrapper">
                    <a th:each="tag : ${popularTags}" th:href="@{/search(q=${tag.name})}" class="topic-tag">
                        <i class="fas fa-hashtag"></i>
                        <span th:text="${tag.name}"></span>
                    </a>
                </div>
        </div>
      </section>

      <!-- Stats & CTA Section -->
      <section class="stats-cta-section">
        <div class="container">
          <div class="stats-cta-wrapper">
            <div class="stats-container">
              <div class="stat-item">
                <div class="stat-number" th:attr="data-value=${numUsers}" th:text="${numUsers}">500K+</div>
                <div class="stat-label">Người dùng</div>
              </div>
              <div class="stat-item">
                <div class="stat-number" th:attr="data-value=${numNewDocuments}" th:text="${numNewDocuments}">15K+</div>
                <div class="stat-label">Tài liệu mới mỗi tháng</div>
              </div>
              <div class="stat-item">
                <div class="stat-number" th:attr="data-value=${numDownloads}" th:text="${numDownloads}">2.5M+</div>
                <div class="stat-label">Lượt tải xuống</div>
              </div>
              <div class="stat-item">
                <div class="stat-number" th:attr="data-value=${numContributors}" th:text="${numContributors}">100K+</div>
                <div class="stat-label">Tác giả đóng góp</div>
              </div>
            </div>

            <div class="cta-container">
              <h3 class="cta-title">Bạn có tài liệu muốn chia sẻ?</h3>
              <p class="cta-description">
                Đóng góp tài liệu của bạn và trở thành một phần của cộng đồng
                chia sẻ tri thức. Nhận xu thưởng và xây dựng danh tiếng của bạn.
              </p>
              <div class="cta-buttons">
                <a href="upload" class="cta-btn cta-btn-primary">
                  <i class="fas fa-upload"></i> Đăng tải tài liệu
                </a>
                <a href="#" class="cta-btn cta-btn-secondary">
                  <i class="fas fa-info-circle"></i> Tìm hiểu thêm
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <div th:replace="~{fragments/client/layout :: footer}"></div>

    <!-- Back To Top Button -->
    <button id="backToTop" class="back-to-top">
      <i class="fas fa-arrow-up"></i>
    </button>

    <script th:src="@{/js/client-header.js}"></script>
    <script th:src="@{/js/main.js}"></script>
    <script th:src="@{/js/categories.js}"></script>
  </body>
</html>
