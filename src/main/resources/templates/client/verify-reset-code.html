<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Xác nhận mã - EduShare</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&family=Open+Sans:wght@400;500;600&family=Playfair+Display:wght@700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/css/responsive.css}" />
    <link rel="stylesheet" th:href="@{/css/main-fixes.css}" />
    <link rel="stylesheet" th:href="@{/css/auth.css}" />
    <link rel="stylesheet" th:href="@{/css/footer-modern.css}" />
    <link rel="stylesheet" th:href="@{/css/password-recovery.css}" />
    <link rel="stylesheet" th:href="@{/css/client-header.css}" />
    <link rel="stylesheet" th:href="@{/css/client-footer.css}" />
    <link rel="stylesheet" th:href="@{/css/admin/toast.css}" />
    
    <!-- Flash Toast Meta Tags -->
    <meta name="flash-success" th:content="${success}" th:if="${success}"/>
    <meta name="flash-error" th:content="${error}" th:if="${error}"/>
    <meta name="flash-warning" th:content="${warning}" th:if="${warning}"/>
    <meta name="flash-info" th:content="${info}" th:if="${info}"/>
</head>
<body>
    <div th:replace="~{fragments/client/layout :: header}"></div>

    <main>
        <section class="auth-section">
            <div class="auth-container">
                <div class="auth-header">
                    <div class="auth-header-content">
                        <h1>Xác nhận mã</h1>
                        <p>Nhập mã 6 số đã gửi đến email <strong th:text="${email}"></strong></p>
                    </div>
                </div>

                <div class="auth-body">
                    <div class="auth-forms">
                        <div class="auth-error" th:if="${error}">
                            <i class="fas fa-exclamation-circle"></i>
                            <span th:text="${error}"></span>
                        </div>

                        <div class="auth-success" th:if="${success}">
                            <i class="fas fa-check-circle"></i>
                            <span th:text="${success}"></span>
                        </div>

                        <form th:action="@{/verify-reset-code}" method="post" class="auth-form active">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                            <input type="hidden" name="email" th:value="${email}" />
                            
                            <div class="form-group">
                                <label for="code">Mã xác nhận</label>
                                <div class="input-group">
                                    <span class="input-icon"><i class="fas fa-key"></i></span>
                                    <input type="text" id="code" name="code" placeholder="Nhập mã 6 số" maxlength="6" required />
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary btn-block">Xác nhận</button>

                            <div class="form-footer">
                                <p><a th:href="@{/forgot-password}">Gửi lại mã</a></p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>
   <!-- Footer -->
   <div th:replace="~{fragments/client/layout :: footer}"></div>

   <!-- Toast Container -->
   <div class="toast-container" id="toastContainer"></div>

   <!-- Scripts -->
   <script th:src="@{/js/main.js}"></script>
   <script th:src="@{/js/auth.js}"></script>
   <script th:src="@{/js/client-header.js}"></script>
   <script th:src="@{/js/admin/toast.js}"></script>
   <script th:src="@{/js/admin/flash-toast.js}"></script>
</body>
</html>